<div class="container py-4 header-m " translate="no" style="margin-top: 100px;">
    <!-- <ngx-spinner bdOpacity=0.9 bdColor="rgba(51, 51, 51, 0.8)" size="medium" color="#fff"
              type="ball-spin-clockwise">
          </ngx-spinner> -->
      <div class="form-card">
          <!-- <ngx-spinner bdOpacity="0.9" bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-spin-clockwise">
          </ngx-spinner> -->
          <form [formGroup]="updateEventForm" class="p-5">
              <div class="row">
                  <h3 class="section-header-title text-center">Update Event</h3>
              </div>
              <div class="temple-form-heading ">
                  <h3>Event Details</h3>
                  <hr>
                  <div class="row">
                      <div class="col-md-8">
                          <div class="form-group">
                              <label for="goshalanmae">Event Name*</label>
                              <input type="text" class="form-control" id="templeName" formControlName="name" placeholder="Enter the Event Name">
                              <div *ngIf="updateEventForm.get('name')?.invalid && (updateEventForm.get('name')?.dirty || updateEventForm.get('name')?.touched)" class="text-danger">
                                Event Name is required
                              </div>
                          </div>
                      </div>
                      <div class="col-md-4">
                          <div class="form-group">
                              <label for="GoshalaCategory">Event Category*</label>
                              <select class="form-control" id="goshalaCategory" formControlName="category" >
                                  <option *ngFor="let option of eventCategoryoptions" [value]="option.value">{{ option.label }}</option>
                                </select>
                                <div *ngIf="updateEventForm.get('category')?.invalid && (updateEventForm.get('category')?.dirty || updateEventForm.get('category')?.touched)" class="text-danger">
                                  Event Category is required
                                </div>
                          </div>
                      </div>
                  </div>
                 
                  
                  
                  <div class="row">
                   
                    <div class="col-md-6">
                      <div class="form-group">
                        <label for="start_date">Start Date*</label>
                        <input
                          type="date"
                          class="form-control"
                          id="start_date"
                          formControlName="start_date"
                          (change)="updateMinDate()"
                          placeholder="Enter the Start Date"
                        >
                        <div
                          *ngIf="updateEventForm.get('start_date')?.invalid && (updateEventForm.get('start_date')?.dirty || updateEventForm.get('start_date')?.touched)"
                          class="text-danger"
                        >
                          Start Date is required
                        </div>
                      </div>
                    </div>
                   
                    <div class="col-md-6">
                      <div class="form-group">
                        <label for="end_date">End Date*</label>
                        <input
                          type="date"
                          class="form-control"
                          id="end_date"
                          formControlName="end_date"
                          [min]="minDate"
                          placeholder="Enter the End Date"
                        >
                        <div
                          *ngIf="updateEventForm.get('end_date')?.invalid && (updateEventForm.get('end_date')?.dirty || updateEventForm.get('end_date')?.touched)"
                          class="text-danger"
                        >
                          End Date is required
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  
                  <div class="row">
                    
                    <div class="col-md-6">
                      <div class="form-group">
                       <label for="registartion numer">Start Time</label>
                       <input type="time" class="form-control" id="reg_num" formControlName="start_time" >
                       <div *ngIf="updateEventForm.get('start_time')?.invalid && (updateEventForm.get('start_time')?.dirty || updateEventForm.get('start_time')?.touched)" class="text-danger">
                        End Time is required
                      </div>
                      </div> 
                   </div>
                    
                    <div class="col-md-6">
                      <div class="form-group">
                       <label for="registartion numer">End Time</label>
                       <input type="time" class="form-control" id="reg_num" formControlName="end_time" >
                       <div *ngIf="updateEventForm.get('end_time')?.invalid && (updateEventForm.get('end_time')?.dirty || updateEventForm.get('end_time')?.touched)" class="text-danger">
                        End Time is required
                      </div>
                      </div> 
                   </div>
                   
                </div>
                  <div class="row">
                      <div class="col-md-6">
                         <div class="form-group">
                          <label for="address">Contact Name*</label>
                          <input type="text" class="form-control" id="address" formControlName="contact_name" placeholder="Enter the Contact Name">
                          <div *ngIf="updateEventForm.get('contact_name')?.invalid && (updateEventForm.get('contact_name')?.dirty || updateEventForm.get('contact_name')?.touched)" class="text-danger">
                            Contact Name is required
                          </div>
                         </div> 
                      </div>
                      
                     <div class="col-md-6">
                      <div class="form-group">
                        <label for="contact_number">Contact Number*</label>
                        <input
                          type="text"
                          class="form-control"
                          formControlName="contact_phone"
                          placeholder="Enter the Contact Number"
                        />
                       
                        <div
                          *ngIf="
                            contactNumber?.invalid &&
                            (contactNumber?.dirty || contactNumber?.touched)
                          "
                          class="text-danger"
                        >
                          <div *ngIf="contactNumber?.errors?.['required']">
                            Contact Number is required
                          </div>
                          <div *ngIf="contactNumber?.errors?.['pattern']">
                            Contact Number must be a 10-digit number
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">
                       <div class="form-group">
                        <label for="address"> Email</label>
                        <input type="text" class="form-control" id="contact_email" formControlName="contact_email" placeholder="Enter the Contact Email">
                        <div *ngIf="updateEventForm.get('contact_email')?.invalid && (updateEventForm.get('contact_email')?.dirty || updateEventForm.get('contact_email')?.touched)" class="text-danger">
                           Email is required
                        </div>
                       </div> 
                    </div>
                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="map_location">Temple Map Location (URL) *</label>
                          <div class="input-group">
                            <input
                              type="url"
                              class="form-control"
                              id="map_location"
                              formControlName="map_location"
                              placeholder="https://example.com/map"
                            />
                            <div class="input-group-append">
                              <button
                                type="button"
                                class="btn btn-outline-secondary"
                                (click)="getCurrentLocation()"
                                title="Fetch Current Location"
                              >
                                üìç Get Location
                              </button>
                            </div>
                          </div>
                          <small class="form-text text-muted">
                            Please provide a valid URL for the temple's map location.
                          </small>
                          <div
                            *ngIf="updateEventForm.get('map_location')?.invalid && (updateEventForm.get('map_location')?.dirty || updateEventForm.get('map_location')?.touched)"
                            class="text-danger"
                          >
                            Please enter a valid URL for the Temple Map Location.
                          </div>
                        </div>
                      </div>
                    </div>
  
                    <div class="col-md-8">
                      <div class="form-group">
                       <label for="address">Address*</label>
                       <input type="text" class="form-control" id="address" formControlName="address" placeholder="Enter the Address">
                       <div *ngIf="updateEventForm.get('address')?.invalid && (updateEventForm.get('address')?.dirty || updateEventForm.get('address')?.touched)" class="text-danger">
                        Address is required
                       </div>
                      </div> 

                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="status">Status</label>
                          <select class="form-control" id="status" formControlName="status">
                            <option value="ACTIVE">ACTIVE</option>
                            <option value="INACTIVE">INACTIVE</option>
                          </select>
                          <div *ngIf="updateEventForm.get('status')?.invalid && (updateEventForm.get('status')?.dirty || updateEventForm.get('status')?.touched)" class="text-danger">
                            Please select an option
                          </div>
                        </div>
                      </div>
                   </div>
                    <div class="col-md-12">
                      <div class="form-group">
                       <label for="address">Description</label>
                       <textarea class="form-control" id="desc" formControlName="desc" placeholder="Describe about the temple in less than 4500 words" rows="3"></textarea>
                      </div> 
                   </div>
                </div>

                <!-- <div class="row"  >
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Please select a country">
                        <label for="country">Country*</label>
                        <nz-select formControlName="country"nzPlaceHolder="Select country" [nzShowSearch]="true"  nzNotFoundContent="No data found">
                          <nz-option *ngFor="let option of eventCountryOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="State is required">
                        <label for="state">State*</label>
                        <nz-select formControlName="state" nzPlaceHolder="Select state" [nzShowSearch]="true" nzNotFoundContent="No data found">
                          <nz-option *ngFor="let option of eventStateOptions" [nzValue]="option.value"  [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="District is required">
                        <label for="district">District*</label>
                        <nz-select formControlName="district" nzPlaceHolder="Select district" [nzShowSearch]="true" nzNotFoundContent="No data found">
                          <nz-option *ngFor="let option of eventDistrictOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Mandal is required">
                        <label for="mandal">Mandal*</label>
                        <nz-select formControlName="mandal" nzPlaceHolder="Select mandal" >
                          <nz-option *ngFor="let option of eventMandalOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Village is required">
                        <label for="village">Village*</label>
                        <nz-select formControlName="object_id" nzPlaceHolder="Select village" [nzShowSearch]="true" nzNotFoundContent="No data found">
                          <nz-option *ngFor="let option of eventVillageOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                </div> -->


                <div class="row"  *ngIf="!InVillage">
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Please select a country">
                        <label for="country">Country*</label>
                        <nz-select formControlName="country" nzPlaceHolder="Select country" [nzShowSearch]="true"  nzNotFoundContent="No data found">
                          <nz-option *ngFor="let option of eventCountryOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="State is required">
                        <label for="state">State*</label>
                        <nz-select formControlName="state" nzPlaceHolder="Select state" [nzShowSearch]="true" nzNotFoundContent="No data found">
                          <nz-option *ngFor="let option of eventStateOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="District is required">
                        <label for="district">District*</label>
                        <nz-select formControlName="district" nzPlaceHolder="Select district" [nzShowSearch]="true" nzNotFoundContent="No data found">
                          <nz-option *ngFor="let option of eventDistrictOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Mandal is required">
                        <label for="mandal">Mandal*</label>
                        <nz-select formControlName="mandal" nzPlaceHolder="Select mandal" [nzShowSearch]="true" nzNotFoundContent="No data found">
                          <nz-option *ngFor="let option of eventMandalOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div class="col-md-4">
                    <nz-form-item>
                      <nz-form-control nzErrorTip="Village is required">
                        <label for="village">Village*</label>
                        <nz-select formControlName="object_id" nzPlaceHolder="Select village" [nzShowSearch]="true" nzNotFoundContent="No data found">
                          <nz-option *ngFor="let option of eventVillageOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                </div>




                    <div class="profile-pic-container " formControlName="image_location" (click)="triggerFileInput()">
            
                      <img  
                           [src]="'data:image/jpg;base64,' + profileImage" 
                           alt="Profile Picture" 
                           class="profile-pic"
                           (error)="onImageError($event)"
                           />
                  
                
                
                      
                      <ng-template #defaultPic>
                        <div class="profile-pic-placeholder">
                          <span class="plus-icon">+</span>
                        </div>
                      </ng-template>
                      
                      <div class="overlay">
                        <span class="edit-icon">+</span>
                      </div>
                    </div> 
                  
                <input
                      id="image_location"
                      type="file"
                      accept="image/*"
                      (change)="onFileChange($event)"
                      style="display: none;"
                      #fileInput
                    />
                    <div class="row mt-3">
                      <div class="col-md-12">
                        
                        <div class="text-center">
                          <button type="button" (click)="onSubmit()" style="border-width: 0px;background-color: rgb(241, 124, 15);border-radius:20px;color: white; padding: 15px;"> Submit </button>
                        </div>
                      </div>
                    </div>
              </div>
          </form>
      </div>
  </div>